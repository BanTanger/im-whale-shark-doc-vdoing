---
title: 消息有序性模型
date: 2023-08-04 13:03:41
permalink: /pages/8c8e6d/
---
## 消息有序性保证
为了提高消息在服务端的处理流程(MQ消费,落库存储,ACK确认)，我们在程序实现中采用了线程池技术来提高消息处理时长

但多线程也带来一个问题，消息的处理并不是线性的，在单聊逻辑中，假设两人回应的时间足够短，在多线程下有可能会导致消息的串行处理，打破消息的有序性

对此在数据库表的设计中，为每一条消息体都增添了一个 messageId 做唯一标识，（没写完🤣）